(this["webpackJsonpmap-marker"]=this["webpackJsonpmap-marker"]||[]).push([[0],{54:function(e,t,a){e.exports=a(97)},59:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),o=a.n(l),c=(a(59),a(26)),s=a(21),i=a(22),u=a(14),m=a(24),h=a(23),p=a(20),d=a(10),g=a.n(d),E=a(13),f=a(116),v=a(117),b=a(118),k=a(99),y=a(100),C=a(101),w=a(115),j=a(106),O=a(9),x=a.n(O),T=(a(61),a(35)),M=a.n(T),B=M.a.create();B.defaults.headers.common["cache-control"]="no-cache",B.defaults.headers.post["Content-Type"]="no-cache",B.defaults.headers.put["Content-Type"]="no-cache";var L=M.a.create();L.defaults.headers.common["cache-control"]="no-cache",L.defaults.headers.post["Content-Type"]="no-cache",L.defaults.headers.put["Content-Type"]="no-cache";var S=function(e){L.defaults.headers.common.Authorization="Bearer ".concat(e)},D=B,I=L,z=function(){try{return localStorage.setItem("t","t"),localStorage.removeItem("t"),!0}catch(e){return!1}}(),A=function(e){return z?localStorage.getItem(e):null},N=function(e,t){return!!z&&(localStorage.setItem(e,t),!0)},U=function(){var e=Object(E.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/map/",e.prev=1,e.next=4,D.get("/map/");case 4:return t=e.sent,e.abrupt("return",t);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(E.a)(g.a.mark((function e(t,a,n){var r,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post("/map/marker",{latitud:t,longitud:a,msg:n});case 3:return r=e.sent,l=r.data,e.abrupt("return",l);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),P=a(11),H=a(114),J=a(102),_=a(103),R=a(104),V=a(105),W=f.a.BaseLayer,Y=f.a.Overlay;delete x.a.Icon.Default.prototype._getIconUrl,x.a.Icon.Default.mergeOptions({iconRetinaUrl:a(80),iconUrl:a(81),shadowUrl:a(82)});var Z=new x.a.Icon({iconUrl:"https://image.flaticon.com/icons/svg/817/817760.svg",iconSize:[30,30]}),$=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={openModal:!1,redirectTo:!1,reload:!1,data:[],lat:"",lng:"",msg:"",location:{lat:0,lng:0},zoom:2},n.handleClick=n.handleClick.bind(Object(u.a)(n)),n.onTextChange=n.onTextChange.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"handleClick",value:function(e){this.setState({lat:e.latlng.lat,lng:e.latlng.lng})}},{key:"componentDidMount",value:function(){var e=Object(E.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:t=e.sent,this.setState({data:t.data}),this.fetchData(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"onClickButtonLogin",value:function(e){this.setState({redirectTo:!0})}},{key:"onClickButtonModal",value:function(e){this.setState({openModal:!this.state.openModal})}},{key:"onTextChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"onClickButtonMarker",value:function(){var e=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(this.state.lat,this.state.lng,this.state.msg);case 3:e.sent?this.setState({reload:!0}):alert("Error al crear Marcador 1."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Error al crear Marcador 2.");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.setState({location:{lat:t.coords.latitude,lng:t.coords.longitude},zoom:13})}),(function(){fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(t){e.setState({location:{lat:t.latitude,lng:t.longitude},zoom:7})}))}))}},{key:"render",value:function(){var e=this;return this.state.redirectTo?r.a.createElement(P.a,{to:"/login"}):this.state.reload?r.a.createElement(P.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{center:[this.state.location.lat,this.state.location.lng],zoom:this.state.zoom,minZoom:2.5,maxZoom:20,onClick:this.handleClick},r.a.createElement(f.a,{position:"topright"},r.a.createElement(W,{checked:!0,name:"Dark Mode"},r.a.createElement(b.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"})),r.a.createElement(W,{name:"Base Mapa"},r.a.createElement(b.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})),r.a.createElement(Y,{checked:!0,name:"New Marker"},r.a.createElement(k.a,null," ",this.state.lat&&r.a.createElement(y.a,{position:[this.state.lat,this.state.lng],draggable:!0},r.a.createElement(C.a,null,"Coords:",r.a.createElement("pre",null,"Latitude : ",this.state.lat," ",r.a.createElement("br",null),"Longitude : ",this.state.lng),r.a.createElement(H.a,{isOpen:this.state.openModal},r.a.createElement(J.a,null,"Add New Marker"),r.a.createElement(_.a,null,r.a.createElement("label",null,"latitude"),r.a.createElement("input",{type:"number",name:"lat",disabled:!0,value:this.state.lat}),r.a.createElement("label",null,"longitude"),r.a.createElement("input",{type:"number",name:"lng",disabled:!0,value:this.state.lng}),r.a.createElement("label",null,"Message"),r.a.createElement("input",{type:"text",name:"msg",onChange:this.onTextChange})),r.a.createElement(R.a,null,r.a.createElement(V.a,{onClick:function(){return e.onClickButtonMarker()},color:"primary"},"Create"),r.a.createElement(V.a,{onClick:function(){return e.onClickButtonModal()},color:"secondary"},"Cancel"))),this.props.auth.isLogged?r.a.createElement(V.a,{onClick:function(){return e.onClickButtonModal()},color:"success"},"Add"):r.a.createElement(V.a,{onClick:function(){return e.onClickButtonLogin()},outline:!0,color:"info"},"Login")))," ")),r.a.createElement(Y,{checked:!0,name:"Markers around the world"},r.a.createElement(k.a,null," ",this.state.data.map((function(e){return r.a.createElement(y.a,{position:e.geometry.coordinates,icon:Z},r.a.createElement(C.a,null,r.a.createElement("div",null,r.a.createElement("span",null,"Message :",r.a.createElement("br",null),r.a.createElement("br",null),e.Message)),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",null,"By : ",e.infocreated.userEmail)))))}))," "))),r.a.createElement(w.a,{center:[14.059685,-87.218065],radius:10},r.a.createElement(j.a,{sticky:!0,direction:"left",offset:[-8,-2],opacity:1,permanent:!0,interactive:!0},r.a.createElement("div",null,"Hello, I\xb4m ",r.a.createElement("strong",null,"Rodrigo Erazo "),"From ",r.a.createElement("strong",null,"Honduras"),r.a.createElement("br",null),"If you want to",r.a.createElement("a",{href:"https://paypal.me/rodrigoerazo595",target:"_blank"},"Support me"),r.a.createElement("br",null),"you can buy me a Beer here")))))}}]),a}(n.Component),q=a(18),G=function(){var e=Object(E.a)(g.a.mark((function e(t,a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post("/user/login",{email:t,pswd:a});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),K=(a(94),a(107)),Q=a(108),X=a(109),ee=a(110),te=a(111),ae=a(112),ne=a(113),re=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={email:"",password:"",redirectTo:!1},e.onClickButton=e.onClickButton.bind(Object(u.a)(e)),e.onTextChange=e.onTextChange.bind(Object(u.a)(e)),e}return Object(i.a)(a,[{key:"onTextChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"onClickButton",value:function(){var e=Object(E.a)(g.a.mark((function e(t){var a,n,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(this.state.email,this.state.password);case 3:a=e.sent,n=a.jwt,delete a.jwt,this.setState({redirectTo:!0},(function(){r.props.auth.login(a,n)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Incorrect Credentials.");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(this.state.redirectTo){var e=this.props.location.state?this.props.location.state.from.pathname:"/";return r.a.createElement(P.a,{to:e})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{className:"App"},r.a.createElement(Q.a,null,r.a.createElement(X.a,{lg:"6"},r.a.createElement(ee.a,{className:"form"},r.a.createElement(te.a,null,r.a.createElement(ae.a,null,"Email"),r.a.createElement(ne.a,{type:"email",name:"email",onChange:this.onTextChange,value:this.state.email,placeholder:"myemail@email.com"})),r.a.createElement(te.a,null,r.a.createElement(ae.a,{for:"examplePassword"},"Password"),r.a.createElement(ne.a,{type:"password",name:"password",onChange:this.onTextChange,value:this.state.password,placeholder:"********"})),r.a.createElement("small",null,"Don't have an account?",r.a.createElement(q.b,{to:"/signin"}," Sign Up")),r.a.createElement(V.a,{color:"success",onClick:this.onClickButton},"Login"))),r.a.createElement(X.a,{lg:"6"},r.a.createElement(ee.a,{className:"form"},r.a.createElement(X.a,null,r.a.createElement(te.a,null,r.a.createElement("h3",null,"Development"),r.a.createElement("p",null,"A modern and clean design system of Map Ilustration"))),r.a.createElement(X.a,null,r.a.createElement(te.a,null,r.a.createElement("h3",null,"Features"),r.a.createElement("p",null,"Add Your Owen Marker and say Hi to evryone!"))),r.a.createElement(X.a,null,r.a.createElement(te.a,null,r.a.createElement("h3",null,"Updates"),r.a.createElement("p",null,"This is Version 1.2"))))))))}}]),a}(n.Component),le=function(){var e=Object(E.a)(g.a.mark((function e(t,a,n){var r,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post("/user/signin",{email:t,nombreCompleto:a,password:n});case 3:return r=e.sent,l=r.data,e.abrupt("return",l);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),oe=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={email:"",nombreCompleto:"",password:"",redirectTo:!1},e.onClickButton=e.onClickButton.bind(Object(u.a)(e)),e.onTextChange=e.onTextChange.bind(Object(u.a)(e)),e}return Object(i.a)(a,[{key:"onTextChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"onClickButton",value:function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le(this.state.email,this.state.nombreCompleto,this.state.password);case 3:e.sent?this.setState({redirectTo:!0}):alert("Error al crear cuenta."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Error al crear cuenta.");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.redirectTo?r.a.createElement(P.a,{to:"/login"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{className:"App"},r.a.createElement(Q.a,null,r.a.createElement(X.a,{lg:"6"},r.a.createElement(ee.a,{className:"form"},r.a.createElement(te.a,null,r.a.createElement(ae.a,null,"Email"),r.a.createElement(ne.a,{type:"email",name:"email",onChange:this.onTextChange,value:this.state.email,placeholder:"myemail@email.com"})),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,"Full Name"),r.a.createElement(ne.a,{type:"text",name:"nombreCompleto",onChange:this.onTextChange,value:this.state.nombreCompleto,placeholder:"John Doe"})),r.a.createElement(te.a,null,r.a.createElement(ae.a,{for:"examplePassword"},"Password"),r.a.createElement(ne.a,{type:"password",name:"password",onChange:this.onTextChange,value:this.state.password,placeholder:"********"})),r.a.createElement("small",null,"Do have an account?",r.a.createElement(q.b,{to:"/login"}," Login")),r.a.createElement(V.a,{color:"success",onClick:this.onClickButton},"Create Account"))),r.a.createElement(X.a,{lg:"6"},r.a.createElement(ee.a,{className:"form"},r.a.createElement(X.a,null,r.a.createElement(te.a,null,r.a.createElement("h3",null,"Development"),r.a.createElement("p",null,"A modern and clean design system of Map Ilustration"))),r.a.createElement(X.a,null,r.a.createElement(te.a,null,r.a.createElement("h3",null,"Features"),r.a.createElement("p",null,"Add Your Owen Marker and say Hi to evryone!"))),r.a.createElement(X.a,null,r.a.createElement(te.a,null,r.a.createElement("h3",null,"Updates"),r.a.createElement("p",null,"This is Version 1.2"))))))))}}]),a}(n.Component),ce=(a(95),a(32)),se=function(e){var t=e.component,a=e.auth,n=Object(ce.a)(e,["component","auth"]);return r.a.createElement(P.b,Object.assign({},n,{component:function(e){return r.a.createElement(t,Object.assign({},e,{auth:a}))}}))},ie=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e,n;return Object(s.a)(this,a),(e=t.call(this)).state={user:A("user")||{},jwt:A("jwt")||"",isLogged:!1,loadingBackend:!1},""!==e.state.jwt&&(S(e.state.jwt),e.state.isLogged=!0),e.setLogginData=e.setLogginData.bind(Object(u.a)(e)),e.setLoggoutData=e.setLoggoutData.bind(Object(u.a)(e)),n=e.setLoggoutData,L.interceptors.response.use((function(e){return e}),(function(e){if(console.log(e),e.response)switch(e.response.status){case 401:n();break;default:console.log(e)}else console.log(e);return Promise.reject(e)})),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({loadingBackend:!0})}},{key:"setLogginData",value:function(e,t){this.setState(Object(c.a)(Object(c.a)({},this.state),{},{user:e,jwt:t,isLogged:!0}),(function(){N("jwt",t),N("user",e),S(t)}))}},{key:"setLoggoutData",value:function(){this.state.loadingBackend?this.setState(Object(c.a)(Object(c.a)({},this.state),{},{user:"",jwt:"",isLogged:!1}),(function(){S("")})):(this.state=Object(c.a)(Object(c.a)({},this.state),{},{user:"",jwt:"",isLogged:!1}),S(""))}},{key:"render",value:function(){if(!this.state.loadingBackend)return r.a.createElement("div",null,"...Loading");var e={isLogged:this.state.isLogged,login:this.setLogginData,logout:this.setLoggoutData};return r.a.createElement(q.a,null,r.a.createElement(P.d,null,r.a.createElement(se,{path:"/",component:$,exact:!0,auth:e}),r.a.createElement(se,{path:"/login",component:re,exact:!0,auth:e}),r.a.createElement(se,{path:"/signin",component:oe,exact:!0,auth:e})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(96);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.59815740.chunk.js.map